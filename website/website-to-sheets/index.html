<form id="myCustomForm">
  <!-- <input type="number" name="num-partida" placeholder="numero partida" />
  <input type="text" name="equipe" placeholder="equipe" />
  <input type="number" name="pontuacao-ind" placeholder="pontuacao-ind" />
  <input type="number" name="pontuacao-coop" placeholder="pontuacao-coop" /> -->
  <h2>Equipe X</h2>
  <h3>Equipe X: qtd materias n√∫mero 1</h3>
  <button type="button" onclick="sub_materias_n1_x()"> -1</button>
  <span id="span_count_n1_x">0</span>
  <button type="button" onclick="add_materias_n1_x()"> +1</button>
  <span id="span_result_n1_x"></span>0<span>pts</span>
<br>
  <button type="submit">Submit</button>
</form>

<script type="module">
  import { submitToGoogleForms } from "./googleFormsSubmit.js";

  const valor_n1 = 2;

  function atualizarPontos() {
    const count_n1_x = parseInt(document.getElementById("span_count_n1_x").textContent);
    document.getElementById("span_result_n1_x").textContent = `${count_n1_x * valor_n1}`;
  }
  window.add_materias_n1_x = function() {
    const span_count = document.getElementById("span_count_n1_x");
    span_count.textContent = parseInt(span_count.textContent) + 1;
    atualizarPontos();
  }
  window.sub_materias_n1_x = function() {
    const span_count = document.getElementById("span_count_n1_x");
    span_count.textContent = parseInt(span_count.textContent) - 1;
    if (parseInt(span_count.textContent) < 0) {
      span_count.textContent = 0;
    }
    atualizarPontos();
  }


  document
    .getElementById("myCustomForm")
    .addEventListener("submit", async (e) => {
      e.preventDefault();

      const form = e.target;
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      const googleFormData = {
        "entry.1589049360": data["num-partida"],
        "entry.716767655": data["equipe"],
        "entry.1061580246": document.getElementById("span_result_n1_x").textContent,
        "entry.1383902084": data["pontuacao-coop"],
      };

      try {
        await submitToGoogleForms({
          url: "https://docs.google.com/forms/u/0/d/e/1FAIpQLSdnXoIhHymASG9yfasIBmk6bYtF4g3cT3tgg6_tIuGIvVvJEA/formResponse",
          data: googleFormData,
        });

        console.log("Form submitted successfully:", googleFormData);
      
        alert("Form submitted successfully!");
      } catch (err) {
        console.error("Submission error:", err);
        alert("Failed to submit the form.");
      }
    });


</script>
